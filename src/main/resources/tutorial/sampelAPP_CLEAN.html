
<div>
<h3>Sample Application</h3>
<p>For our demo, we are going to design and create a &ldquo;proof of concept&rdquo; (POC) software system for a fictitious company named "EmpowHR" (meaning "<em>empower Employee HR</em>").</p>
<p>Here is a list of icons that we will use:</p>
<p><img src="images/demo/whiteboard.jpg" alt="" width="24" height="25" />&nbsp;Whiteboard: capture ideas. <br /> <img src="images/demo/rule.jpg" alt="" width="23" height="26" />&nbsp;BizRule: mark business requirements (rules) for the application that we are building. <br /> <img src="images/demo/review.jpg" alt="" width="27" height="26" />&nbsp;Review: used to recap what we just did before moving forward. <br /> <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" />&nbsp;CheckPoint: allow you to get caught up with the latest Model changes and sample data from a github project. <br /> <img src="images/demo/genrun.jpg" alt="" width="23" height="24" />&nbsp;ReGen &amp; Run: use OABuilder code generator to regenerate the application, and then run. <br /> <img src="images/demo/discuss.jpg" alt="" width="24" height="24" />&nbsp;Discuss &amp; Learn: take time to explain some important concepts and technical details about how the system works. <br /> <img src="images/demo/continue.jpg" alt="" width="25" height="26" />Continue working on the Model: after a discussion.<br /> <img src="images/demo/todo.jpg" alt="" width="24" height="25" />&nbsp;To do item.</p>
<p><img src="images/demo/todo.jpg" alt="" width="24" height="25" />&nbsp;to do item: Show the screen shots of final App here.</p>
<p>Along the way, we will give extra details on how to use OABuilder, generate the code, and run the application.</p>
<p>This POC will allow the employees of our customers to earn points. The points are then used to purchase items from a list of choices specific to the type of award and the company offering the reward.</p>
<p>The customers are companies that have hired EmpowHR to manage their employee award campaigns.</p>
<p>The name of our platform will be "empowhr", and will need to be highly configurable, so that the customers are able to create a dynamic experience and tune it to match their company preferences.</p>
<p>Our goal is to be able to build a single platform, that can run as a distributed platform. This means that we want our software to be able to scale and run hundreds of company campaigns, with over a million users, and expect an average of 500 users at a time, with spikes over 5k users.</p>
<p>For our Proof of Concepts, we will deliver:</p>
<ul type="disc">
<li>Object Model</li>
<li>Class diagram for model.</li>
<li>Database Scheme</li>
<li>a working application with Desktop UI</li>
<li>REST API</li>
<li>Web Server</li>
<li>Security</li>
<li>Options to run as Server/Web Server/Clients/Single/CLI/Webservice/etc</li>
<li>Various UI applications, based on type of user.</li>
</ul>
<p>The production platform would look something like this. Locally, we will be able run as a single user instance, or as distributed as we want - clients/server, microservices, etc.</p>
<p><img src="images/demo/platform.jpg" alt="" width="714" height="302" /></p>
<h3>Create using OABuilder</h3>
<p>The code generator that we are using in OABuilder has a starter Model that we can use, "OATemplate". It has model classes for User and UI settings that we can use as our starting point.</p>
<p>Qqqqqqqqqq show opening new model &ldquo;OATemple&rdquo; &hellip; make sure that it&rsquo;s in correct directory, and that it gets updated when changed</p>
<p>We will open it and make a copy using menu option "File/Save Model As ...", naming it &ldquo;EmpowHR&rdquo;.<br /> <img src="images/demo/saveAs.jpg" alt="" width="895" height="675" /></p>
<p>Next, use the Model Editor to configure this new project.<br /> <img src="images/demo/modelSettings.jpg" alt="" width="531" height="370" /></p>
<p><br /> Next create the directory name that was entered for "Code Gen Root Dir" above.</p>
<p>The project is now ready to be generated. This will allow us to run and see the application as we move through the demo. Click on menu item "Generators/Generate All" and select Ok. This will generate the project in the directory that you entered above. <br /> <img src="images/demo/codeGenComplete.jpg" alt="" width="482" height="138" /></p>
<h3>Compiling and Running EmpowHR</h3>
<p>&nbsp;Create a new project in your Java IDE. Here, I am using Eclipse:<br /> <img src="images/demo/eclipseNewProject.jpg" alt="" width="736" height="719" /><br /> Make sure to change Location to the directory that you entered for the Models code generator directory above.</p>
<p>Your project will look like this in the Eclipse project explorer.<br /> <img src="images/demo/eclipseAfterNewProject.jpg" alt="" width="458" height="370" /></p>
<p>Set up the project to use Maven for building. Do this by right clicking on the project name, as follows ...<br /> <img src="images/demo/mavenConfig.jpg" alt="" width="806" height="837" /></p>
<p>We are now ready to run. We have the option to run as single user, and as multi-user (client, client UI, server, webserver, and more). <br /> The runtime directory in the project has subdirectories for each runtype to use as the "working directory".</p>
<p>Running as a single user, do the following from Eclipse to set up to run as Single User mode:<br /> From Eclipse main menu, choose "Run/Run Configurations" and choose option to create a new launch configuration<br /> Enter the following:<br /> <img src="images/demo/eclipseRunAsSingle1.jpg" alt="" width="741" height="465" /><br /> <img src="images/demo/eclipseRunAsSingle2.jpg" alt="" width="741" height="465" /><br /> This is now ready to run.</p>
<p>Running the new App looks like this.<br /> <img src="images/demo/singleUser1.jpg" alt="" width="558" height="321" /></p>
<p>Click on toolbar button &ldquo;Application&rdquo;.<br /> <img src="images/demo/singleUser2.jpg" alt="" width="558" height="321" /></p>
<p>Click on menu item &ldquo;Help&rdquo;.<br /> <img src="images/demo/singleUser3.jpg" alt="" width="377" height="312" /></p>
<p><br /> This is starting point, that will expand as we add and change the model.<br /> Quick note: this same application can be ran as multiuser and split into multiple services at any time. For now, we will use the single user runtime option.</p>
<p>The runtime directory looks like this.<br /> <img src="images/demo/singleRuntimeDirectory.jpg" alt="" width="1156" height="480" /></p>
<p>Runtime directory:<br /> The file single.ini is used for runtime config settings for single user runtime mode. It has default settings for saving the data to file, and loads it into an in-memory database at start up. We will switch over to a database later. For now, the in-memory DB does everything you need for queries and saving. The default config settings can be found in the source code, located in directory com/empowhr/resource, see files values.properties and Resource.java for full listing and more info.<br /> <br /> <img src="images/demo/continue.jpg" alt="" width="25" height="26" />Continue: now that we have it running, we will go back to the model.</p>
<p>Let us add the main Objects, starting with Company. Click on the workspace toolbar "create new Object" (far left). This will create an empty object in the workspace. <br /> <img src="images/demo/newObject1.jpg" alt="" width="932" height="676" /></p>
<p>Change the Object name to "Company", and the other fields will automatically be updated to match.</p>
<p>Use the Object Editor to make the following change:<br /> <img src="images/demo/company1.jpg" alt="" width="635" height="330" /></p>
<p><br /> That is all we need for now, let us add some properties. The properties for "id" and "created" are already added by default. Note: the Id property is an auto assigned sequence number, and is the unique identifier - a good idea to use for most/all objects. <br /> To create properties, let us start off with "name". Click on the Properties editor and click on the new button.<br /> <img src="images/demo/newProp1.jpg" alt="" width="555" height="668" /></p>
<p>and add abbrevName<br /> <img src="images/demo/newProp2.jpg" alt="" width="507" height="322" /><br /> Change the UI column title to "Abbrev".</p>
<p>Ok, now we have a Company Object, with properties. Let us update a couple of other things in the "User Interface" tab.<br /> Select name as the "Display Property".<br /> <img src="images/demo/newObject2.jpg" alt="" width="604" height="369" /></p>
<p>While in the UI tab, go ahead and add the table columns for Company, and the Search properties.</p>
<p>Table columns.<br /> <img src="images/demo/newObject3.jpg" alt="" width="878" height="480" /></p>
<p>Search properties.</p>
<p><img src="images/demo/newObject4.jpg" alt="" width="466" height="330" /></p>
<p>The Company Object is now created with a few properties. We can now add to the Application&rsquo;s Main UI and test it.<br /> Adding to the Application UI is done by going to the Model Editor and choosing App UI tab.<br /> Add a new node for "Company" by clicking the new button and using mouse to drag into position in the tree. Change the name to "Company". <br /> Click on the "Add ..." button and select Company from the popup. <br /> <img src="images/demo/newObject5.jpg" alt="" width="634" height="313" /></p>
<p>Note: always save your model changes. By default, all previous versions of the model will be stored in a backup subdirectory under the directory where you are saving your Model. <br /> example: ./backup/202105011310_EmpowHR.obx</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" />ReGen &amp; Run:<br /> Click on menu item "Generators/Generate All" and regenerate the application, and rerun the Eclipse config for EmpowHr.</p>
<p>This shows the Company search window.<br /> <img src="images/demo/singleUser4.jpg" alt="" width="660" height="380" /></p>
<p><br /> This shows the Company editor.<br /> <img src="images/demo/singleUser5.jpg" alt="" width="660" height="380" /><br /> &lt;![endif]&gt;</p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" />Review: we created the first Object for Company and can create new, search, and edit/update/delete.</p>
<p>Take a moment to look at Code. The code generation uses a combination of techniques:</p>
<p>1. template project, filling in using a small tag language. OABuilder defaults to using the OATemplate project.</p>
<p>2. code generation, directly create files (source, resource, config, etc). </p>
<p>3. Base classes that have subclass that can be used to overwrite methods.</p>
<p>4. Report generation that uses html/xml engine to run as templates</p>
<p>The code generation supports adding &ldquo;callbacks&rsquo; the generated model objects, propertys, links, etc.</p>
<p>The project is generated using Model/View/Control structure, and directories that match. <br /> The Controller packages are responsible for managing specific functionality. <br /> <img src="images/demo/code1.jpg" alt="" width="293" height="528" /></p>
<p>The Model package has the data/entity objects ("./model/oa/*.java"), and the "./model/*Model.java" classes are used to configure the object relationships and rules.<br /> <img src="images/demo/code2.jpg" alt="" width="243" height="561" /></p>
<p>The View packages have the User Interface classes, each named after the Model Objects.<br /> <img src="images/demo/code3.jpg" alt="" width="237" height="608" /></p>
<p>The Resource package has runtime parameters and default values.<br /> <img src="images/demo/code4.jpg" alt="" width="640" height="609" /></p>
<p>For now, that is a good start for reviewing the source code - we will look more later.</p>
<p>Now, create the following three new Objects:<br /> click the new Object button on the workspace toolbar, set the Object name, drag object to match screen shot. <br /> then select all three (mouse drag to rubber band around them), and select a color green for them. <img src="images/demo/newObjects.jpg" alt="" width="635" height="236" /></p>
<p>Next, create the relationships between these Objects, starting with LocationType &ndash;</p>
<p>&nbsp;<img src="images/demo/rule.jpg" alt="" width="23" height="26" />BizRule: "<em>A Company has many of its own Location Types</em>", which is used to describe the names of a company's types of locations. "own" means that the Location Types belong to a single Company, and not shared with other Company ... each Company has its own Location Types. For example: Region, Territory, City, ...</p>
<p><br /> <img src="images/demo/link1.jpg" alt="" width="538" height="261" /></p>
<p>Let us change the relationship to "owned", which means that it is only for the Company that created it, and they are treated as an aggregate (one unit).<br /> <img src="images/demo/link2.jpg" alt="" width="514" height="378" /></p>
<p>We need one more thing for this, to be able to keep the sort order. To do this, we create a property that is a number, so create a new Property, name it "seq", set type as "int" <br /> <img src="images/demo/prop1.jpg" alt="" width="474" height="447" /></p>
<p><br /> ... and then set the "seq" flag.</p>
<p><img src="images/demo/prop2.jpg" alt="" width="637" height="342" /><br /> This will tell it to use this property to keep the sort order, so that it can make sure to load it in the same order.</p>
<p>Now, let us use the "seq" property for the link ...<br /> <img src="images/demo/link3.jpg" alt="" width="466" height="488" /><br /> The Company.LocationTypes will now be auto sequenced in the order that users position them.<br /> You will notice that the link shows a "S" icon.</p>
<p>Note: "Company.LocationTypes" is a <em>property path</em>, an important concept for object graphs.</p>
<p><img src="images/demo/link4.jpg" alt="" width="498" height="204" /></p>
<p>Next, add a couple of things to LocationType, and then we will <img src="images/demo/genrun.jpg" alt="" width="23" height="24" />regenerate and run again. <br /> Add a new "name" property. Notice that for the "Lengths", 25 is max input size. The display size is the default size of textfield, and max display is to allow the textfield to grow to a length (usually the max). The grid length is for the column in a table/grid listing. <br /> <img src="images/demo/prop3.jpg" alt="" width="474" height="306" /><br /> Now, let us go to the Object UI, and set the display property to "name" (under "UI General" left sub tab). Under "Table Columns" subtab, add name. For "Search Panel", add "name".</p>
<p>Go ahead and <img src="images/demo/genrun.jpg" alt="" width="23" height="24" />regen and run again.</p>
<p><br /> <img src="images/demo/demo1.jpg" alt="" width="660" height="380" /><br /> We now have Company.LocationTypes defined. This will be used in the next step, when we set up Company Locations, and how each Location will "<em>know</em>" the Location Type.</p>
<h4>Create Company Locations</h4>
<p>First step is to create an owned link between Company and Location - " <em>A Company has many Locations</em>" <br /> <img src="images/demo/link5.jpg" alt="" width="338" height="453" /></p>
<p>We are now going to set up Locations so that it can be multi-level. This is done by creating a link to itself and flagging it as recursive.<br /> <img src="images/demo/link6.jpg" alt="" width="515" height="587" /></p>
<p>Let us add the following to Location:<br /> create a property "name"<br /> <img src="images/demo/prop4.jpg" alt="" width="469" height="316" /><br /> change Location UI to use "name" as display property ("UI General" left subtab), and add name to table ("Table Columns" left subtab) and search ("Search Panel" left subtab).</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" />ReGen &amp; Run<br /> <img src="images/demo/demo2.jpg" alt="" width="660" height="380" /></p>
<p>Next, we want to know a Location's LocationType, based on its level in the location hierarchy. There are two options, the first would be to allow the selection from the Location's Company list of LocationTypes (<em>Company.LocationTypes</em>). The second is to have it automatically pick LocationType based on Company.LocationTypes list to match the position of the Location under Company (since Location is recursive/hierarchy). We will choose both, so that a Location.LocationType can be directly selected, else it will default to the Company.LocationTypes with same position.<br /> &lt;![endif]&gt;</p>
<p>To do this, we will first create a Location.LocationType link. Right click the Location object and click new link, or click the link button on the workspace toolbar. <br /> Now we need to make a couple changes to the new Location.LocationType. First make sure the relationship is One LocationType, Many Locations, and that the names are "Locations" and "LocationType".<br /> <img src="images/demo/link7.jpg" alt="" width="440" height="273" /><br /> Next, we need to have choices for LocationType use the LocationTypes from Company.LocationTypes. This is done be going to the "General III" tab and setting the value for "Select LocationType from:" to Company.locationTypes.<br /> <img src="images/demo/link8.jpg" alt="" width="754" height="352" /></p>
<p>Do a codegen and rerun the App<br /> <img src="images/demo/demo3.jpg" alt="" width="716" height="463" /></p>
<p>One last thing: click on the link Company.locations, go to the "General II" tab, and set "Is Locations Recursive" to checked.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" />ReGen &amp; Run: then add some data.</p>
<p>If you click on sidebar "Company Search", and then click the "new" button.<br /> <img src="images/demo/demo4.jpg" alt="" width="716" height="463" /></p>
<p><br /> Set the name of this new Company to "TestCorp", abbrev name "TC". <br /> Click on the "Location Types" tab, and use the "New" button to create and match the following list:<br /> <img src="images/demo/demo5.jpg" alt="" width="716" height="463" /></p>
<p><br /> Close the Application, and rerun again. Click the toolbar "Application" button, then click the sidebar "Company", notice that no Companies are showing. Click the "Company Search" button, and then click the "Run Search" button to get a list of all the Companies. Your new Company will be on the list, and under the Company side bar.<br /> <img src="images/demo/demo6.jpg" alt="" width="701" height="463" /><br /> Note: the data is stored in the "runtime/single/data directory", in multiple formats. They are also saved backup copies with files names that match.</p>
<p>To edit a Company, either click the Company showing in the sidebar "Test Corp", or you can click it in the search listing, and then pop it up by clicking the "Details ..." button in the bottom toolbar.<br /> The first shows it inside the main window, the second will show it in a popup window.</p>
<p>Now, let us add a Location. Go to the following and add a new Location.<br /> <img src="images/demo/demo7.jpg" alt="" width="716" height="463" /><br /> Notice that the Location list will be recursive and displayed in a tree table.</p>
<p>Next, we want to allow the Location that has not been assigned a LocationType to default to the specific value in the Company.LocationTypes.<br /> We will do this by creating a "Calculated Link" between Location.LocationType and call it "Location.calcLocationType".</p>
<p>Right click on Location and choose the following:<br /> <img src="images/demo/link9.jpg" alt="" width="582" height="399" /></p>
<p><br /> Let us set up the Link.<br /> <img src="images/demo/link10.jpg" alt="" width="471" height="430" /></p>
<p><br /> Now, we need to set up the calculation. The first thing is to go to the "Properties" tab, and click "Add ..." to add property paths: "Company.locationTypes", "Company.locations", and "locationType".</p>
<p><br /> <img src="images/demo/link11.jpg" alt="" width="748" height="536" /></p>
<p>These are the property paths that are used to determine the correct Location.locationType, and needs to be recalculated if any of the values change. <br /> <img src="images/demo/link15.jpg" alt="" width="287" height="288" /></p>
<p>Go to the "From Code", and add the code that will be used for the calculation. Click the "Generate Code" to have a template created to enter code.<br /> <img src="images/demo/link12.jpg" alt="" width="448" height="289" /></p>
<p><br /> Enter code, that shows that it first checks to see if a LocationType is assigned, else it will determine based on the Company.LocationTypes. <img src="images/demo/link13.jpg" alt="" width="469" height="334" /></p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" />Review: We now have Company.Locations, that can be a hierarchy. The Company has a list of LocationTypes, that can be directly assigned to a Location, or use the correct value from Company.LocationTypes.</p>
<p><br /> Let us add the Location.caclLocationType to the Location table columns.<br /> <img src="images/demo/link14.jpg" alt="" width="865" height="448" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" />ReGen &amp; Run<br /> <img src="images/demo/demo8.jpg" alt="" width="716" height="463" /><br /> The Location.calcLocationType will either be the assigned LocationType, or if empty (null) it will be the same as the Company.LocationTypes(pos), where pos is the position of this Location in the Company.Location hierarchy.</p>
<h3>Running as Multiuser, and with webserver.</h3>
<p>We have been running as "single" user, and now we will run a "server", and multiple "clients" - to show it working as a distributed application.</p>
<p>Run as Server - first, copy the files "ObjectCache.bin" and "data.bin" from "runtime/<strong>single</strong>/data" to "runtime/<strong>server</strong>/data".<br /> <img src="images/demo/code5.jpg" alt="" width="239" height="499" /></p>
<p><br /> To run from Eclipse, choose menu "Run/ Run Configurations ..." and click on "EmpowHR", change name to "EmpowHR single". Then click the duplicate button (upper left toolbar) to create a duplicate, and name it "EmpowHR server". Go to the "Arguments" tab, and change single to server in both places.<br /> <img src="images/demo/code6.jpg" alt="" width="612" height="356" /></p>
<p><br /> Run this, and you will see the server UI. <br /> <img src="images/demo/demo9.jpg" alt="" width="297" height="256" /></p>
<p>Follow the same steps to create an Eclipse runtime for "client", and then run.<br /> <img src="images/demo/demo10.jpg" alt="" width="612" height="355" /></p>
<p><img src="images/demo/demo11.jpg" alt="" width="213" height="295" /><br /> Login using "admin"/"admin" for user/password.</p>
<p>Run two clients, and go to the company location that was created. <br /> <img src="images/demo/demo12.jpg" alt="" width="711" height="294" /><br /> Now, change the location type and notice how the other UI is automatically updated.</p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" />&nbsp;Discuss &amp; Learn: The change causes a "<em>reaction</em>", causing the calcLocationType to be redisplayed on both programs. This behavior is described as an "observable &amp; reactive object model", and is an important feature of the OA libraries. This allows any of the model objects to be distributed and synchronized across servers - realtime or eventually.</p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" />&nbsp;Discuss &amp; Learn: Back to discussing databases ... the model objects are set up to work with any datasource, all types and combinations. Currently, our demo application is using an in-memory datasource that supports sql/OQL and is persisted to xml, json, java binary. The client apps are using a client datasource, which remotely interacts with the server's datasource. Caching is included, and "hinting" is used when fetching data to make it more efficient when making a trip to another server or disk. For example, getting a Company is <em>smart</em> enough to know about other information that will be needed close to the Company (reference data, other Companies, etc), and sends this with the request as "hints". The hints are based on the object graph and how it is "wired" (used/configured) in the part of the application that is requesting data.</p>
<p><strong>For example</strong>: a Company is using its LocationTypes to set the Company's Locations.locationTypes.<br /> If the Company X is not in memory (cache), then it will be requested from datasource. If it is running on a client, then the datasource knows the server(s) to get Company from. The computer could be using a database directly. Either way, it "looks" at how the Company will be used and is able to "hint" to "also send the Company.locationTypes, Company.locations, etc." if it has time. Otherwise, there is a good chance it might be calling for it soon, so go ahead and have it ready. This allows it to be dynamic and smart about how and what is being delivered and acts as a JIT (just in time) access for your model objects. The "goal" is to act like the objects are in the local cache.</p>
<p><strong>Another example</strong>: selecting all Orders for an Employee, to display them and allow editing. The application code around this looks at how the model objects are "wired"/connected and will see that the OrderItems, and other reference data could be needed (based on user navigation). When the method is called for order.getOrderItems(), it will look at other unloaded reference on "order", and along with the other Orders close to this Order from the collection of Order objects from the query.</p>
<h3>Web Server</h3>
<p>While we have the server running, let us use the browser to see some features of the webserver. <br /> The server uses embedded Jetty for a zero admin webserver. It is configured as a high end webserver with built-in services, including Java Server Pages, web services (SOAP), remoting through http, REST API, Swagger/OpenAPI, security, and many more features.</p>
<h3>REST API for Model</h3>
<p>There is full REST API included for the Model. For example, use your browser to go to "http://127.0.0.1:8080/servlet/oarest/companies" to see the list of Companies. <br /> Use admin/admin for access. <br /> <img src="images/demo/browser1.jpg" alt="" width="473" height="405" /></p>
<p><br /> We will spend more time on the REST API later, and the other web server features. It is a secure access to your full Model.</p>
<h3>OpenAPI using Swagger</h3>
<p>The Swagger interface shows all the Model REST API calls, and is included in the generated Application. <br /> This needs to be generated by choosing menu "Generators / Open API" and selecting directory "swagger-ui". This creates the file OpenAPI.json.</p>
<p><br /> After generating, use this link to display in browser: "http://127.0.0.1:8080/swagger-ui/index.html". <br /> <img src="images/demo/browser2.jpg" alt="" width="477" height="376" /></p>
<h3>Using CheckPoints for catching up with Model and sample data for Demo Application.</h3>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" />CheckPoints: throughout this demo, there will be checkpoints with a number. This can be used to get a copy of the Model (EmpowHR.obx), and the data files &ldquo;data.bin&rdquo; and &ldquo;ObjectCache.bin&rdquo;.</p>
<p>Go to the EmpowHR project at <a href="https://github.com/ViaOA/empowhr">https://github.com/ViaOA/empowhr</a>, and go to the checkpoints directory.</p>
<p>Do the following if you would like to use them at that point. Substitute # with the check point subdirectory that is needed.</p>
<ul type="disc">
<li>Replace your model with EmpowHR.obx</li>
<li>Copy ObjectCache.bin to runtime/server/data and runtime/single/data</li>
<li>Copy data.bin to runtime/server/data and runtime/single/data</li>
</ul>
<p>Note: some of the CheckPoints will only have a Model. You can use the previous checkpoint's data files.</p>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #1 was created, before starting this next section. <br /> use the instructions above to use the checkpoint files.</p>
<p><img src="images/demo/continue.jpg" alt="" width="25" height="26" border="0" />Continue working on the Model: </p>
<p>Ok, close the Server and Client Apps, and we will go back to running as single user, and continue building our Model.</p>
<p>The last model change was the calculated Location.LocationType link. We are done with that and can now create the "Company owns many Campaigns" Link.</p>
<p><br /> First, let us add the following Properties to Campaign: name, startDate, endDate.<br /> <img src="images/demo/prop5.jpg" alt="" width="703" height="261" border="0" /></p>
<p>Make the following change for Campaign:</p>
<p>Go to the &ldquo;User Interface&rdquo; tab, &ldquo;UI General&rdquo; left tab, and set Display Property: "name" <br /> Then go to the &ldquo;Edit Panel&rdquo; side tab, to match the following:<br /> <img src="images/demo/object1.jpg" alt="" width="453" height="263" border="0" /></p>
<p>Also, make sure to check the "include" column for "Id".<br /> &lt;![if !supportLineBreakNewLine]&gt;<br /> &lt;![endif]&gt;</p>
<p>For UI table columns, match the following:<br /> <img src="images/demo/object2.jpg" alt="" width="453" height="263" border="0" /></p>
<p><br /> And select all properties for searching:<br /> <img src="images/demo/object3.jpg" alt="" width="453" height="263" border="0" /></p>
<p>Now create a link from Company to Campaign (1toM) and make it an owned link.<br /> <img src="images/demo/link16.jpg" alt="" width="608" height="546" border="0" /><br /> ... and go back to Campaign table columns and add Company.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />&nbsp;ReGen &amp; Run: do a codegen and rerun the App as single user.<br /> <br /> Perform a Company search, select your "Test Corp" Company, then then create a new Campaign.<img src="images/demo/demo13.jpg" alt="" width="716" height="463" border="0" /><br /> <br /> Now we will add a validation to campaign.endDate. It can&rsquo;t be before startDate.</p>
<p>There's a couple of options:</p>
<p>1. have it checked when the setEndDate is called.</p>
<p>2. add validation to a callback (discussed next) that a program can interact with.</p>
<p>Option #1, validate during call to setEndDate. <br /> Select endDate in the property editor. Go to "code" tab, "get/set" subtab, click the "generate code", and then add the custom validation.</p>
<p><br /> <img src="images/demo/prop6.jpg" alt="" width="659" height="572" border="0" /></p>
<p><br /> This works and keeps invalid date values, but it would be "nice" to know ahead of time if a new value is valid or not. <br /> Let us set that up using a Callback: Select the callback subtab, check the "VerifyPropertyChange", then click "generate code", then add the custom code.</p>
<p><img src="images/demo/prop7.jpg" alt="" width="756" height="269" border="0" /><br /> &lt;![if !supportLineBreakNewLine]&gt;<br /> &lt;![endif]&gt;</p>
<p>Do a codegen and rerun the App as single user. Try to change the Campaign.endDate to be before the startDate.<br /> <img src="images/demo/demo14.jpg" alt="" width="716" height="462" border="0" /></p>
<p>Let us go ahead and use Callback for another user interaction. If the Campaign.startDate is changed, and its previous value is less then today, then we should have the user confirm the change.<br /> <img src="images/demo/prop8.jpg" alt="" width="802" height="305" border="0" /></p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />&nbsp;Discuss &amp; Learn: &ldquo;Callbacks&rdquo;. Used to allow outside code to interact with custom code in Model Objects. This is an important ingredient in the code generation techniques used in OA, to be able to build close to 100% of an Application. There are always special cases that fall outside of what can be done in a modeling and code generators, and callbacks are great for solving this.</p>
<p>Set the "sort order" for Company.Campaigns to be by startDate.<br /> <img src="images/demo/link17.jpg" alt="" width="644" height="488" border="0" /><br /> We could have (might do it later) used a seq property for the sort order.</p>
<h3>Changes to the Model</h3>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />&nbsp;Discuss &amp; Learn: OABuilder keeps track of the changes. Go to the Model Editor, "Changes" tab. <br /> <img src="images/demo/changes1.jpg" alt="" width="710" height="319" border="0" /><br /> These are the changes made so far, and are used by code generation to do things like creating a database change script (DDL &amp; SQL).</p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: We have added Company.Campaigns. <br /> Next, let us go in fast forward and layout a few groups of the Objects needed: Employees, Awards, and Items. Then we will connect them together and start filling in details. <br /> Here is the story - our customers are Companies, that have Locations, that have Employees. These Employees receive Awards, that can be redeemed for Items. The Items are in a Catalog, that is organized into Sections. Each Award has an AwardType, that is associated with the Catalog that can be used to choose an Item from. Each Item can have options (ex: color, size, etc). <br /> &lt;![if !supportLineBreakNewLine]&gt;<br /> &lt;![endif]&gt;</p>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />&nbsp;CheckPoint: Do not worry about creating these, instead use the saved Model from "checkpoints/2/EmpowHR.obx".</p>
<p><img src="images/demo/model1.jpg" alt="" width="734" height="280" border="0" /><br /> This is the "mode" that you can be in when talking through the business requirements and building a model for it. The next "block" of changes will be for the shopping cart and creating and managing employee Orders. For now, we will zoom in and get this last block defined and tested.</p>
<p>Let us color code first. Set the main Objects to green, to have them stand out, and have the other Objects unflag so that they are gray.<br /> <img src="images/demo/model2.jpg" alt="" width="906" height="544" border="0" /></p>
<p>Let us start with Employee and add the following properties.<br /> <img src="images/demo/model3.jpg" alt="" width="866" height="427" border="0" /><br /> The password will use a one-way encryption and needs to allow for some "bloat", so the size is set to 70.</p>
<p>Create a link for "Location.employees" (one2many). This is not an owned link, since an Employee can be moved to another Location. We do want to make sure that Employees and the Location must be in the same Company. Otherwise, an Employee could be added to a Location in a different Company. To define this, go to the Link tab "General III" and set the equal property value for Location and Employee to be the common Company.</p>
<p>Location.Company &amp; Employee.Location.Company. This tells the Model that they both must match for it to be valid.</p>
<p><br /> <img src="images/demo/link18.jpg" alt="" width="908" height="486" border="0" /></p>
<p>Let us create a Calculated property for Employee "fullName".</p>
<p>Select Employee in workspace, select the Calc Property Editor, and click the new button.<br /> <img src="images/demo/calcProp1.jpg" alt="" width="815" height="576" border="0" /></p>
<p><br /> Set up the dependent properties as shown.<br /> <img src="images/demo/calcProp2.jpg" alt="" width="1090" height="332" border="0" /></p>
<p><br /> Add the following for the code.<br /> <img src="images/demo/calcProp3.jpg" alt="" width="375" height="221" border="0" /></p>
<p>Set up Employee UI, change display to "fullName", and set up "Table Columns" for first, last names, and have search match this:<br /> <img src="images/demo/object4.jpg" alt="" width="627" height="382" border="0" /><br /> For the search, set userId, location and company to have "null option" checked.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />&nbsp;ReGen &amp; Run: &nbsp;do a codegen and rerun the App as single user.</p>
<p>There is a compiler error with the calculated property Employee.fullName. Change the code to this and regen.<br /> <img src="images/demo/calcProp4.jpg" alt="" width="494" height="234" border="0" /></p>
<p>Do a <img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />codegen and rerun the App as single user.<br /> <img src="images/demo/demo15.jpg" alt="" width="716" height="463" border="0" /></p>
<p>Ok, now we have Location.employees, but need to add a few "user friendly" items. First, there is no way to find an Employee without "drilling" down from Company and Locations. <br /> Let us create an Employee Search from Company. Right click the Company Object in the workspace, and choose "Create new Search Link ...", <img src="images/demo/link19.jpg" alt="" width="713" height="392" border="0" /></p>
<p><br /> <img src="images/demo/link20.jpg" alt="" width="582" height="546" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />&nbsp;ReGen &amp; Run: regen, run, and bring up your Company (using Company Search), and then use the "Search Employees" tab to find John Doe.</p>
<p>There are a few things to notice in the UI, and how it directly works as Modelled.</p>
<p>From the search for John Doe, from the Company, you can popup Employee using the "Details ..." button. This shows the Company.Employees relationship.<br /> <img src="images/demo/demo16.jpg" alt="" width="716" height="463" border="0" /></p>
<p>From there you can click on the Location "Details ..." button, and then see John Doe in the "Employees" tab.<br /> The UI navigation follows the Model's Objects &amp; Links. The Application is treating this as an Object Graph, which means the Objects are not just a copy of data from a record in database, but loaded into cache and distributed across systems.</p>
<p><br /> Changing "John Doe" to "John Dox" from the Location's Employee table shows how the "other" John Doe is also changed. This is because the program and Object Graph are <em>smart enough</em> to be using the same instance. Any other part of the Application that has Employee John Doe (id=1) will use the same object and not create a duplicate.<br /> <img src="images/demo/demo17.jpg" alt="" width="716" height="463" border="0" /></p>
<p>The Company Employee Search is helpful, but an Admin would want to search all Employees. Let us create a full system Employee search, and update the UI with a new title bar button for searching.<br /> We do this from the Model / App UI tab. We are first going to change the UI hierarchy so that it will have another layer/level.</p>
<p>The UI generator looks at the "depth" of the UI tree to determine how to build the navigation layout. The top level is for main toolbar, next level is side bars, and additional levels will allow expanding the side levels.</p>
<p>Click on the new button (bottom left) to create a new node and then drag-n-drop it to under the Application (root node). Name this node "Company" and then drag the other "Company" node under it.</p>
<p>Create another new node, name it "System" and drag/move it to Application. Click on the new node and name it "System" for now. Drag node "Application" and drop on "System" node.<br /> <img src="images/demo/model4.jpg" alt="" width="627" height="262" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />&nbsp;ReGen &amp; Run: make sure it is still working :)</p>
<p><img src="images/demo/demo18.jpg" alt="" width="716" height="463" border="0" /></p>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #3 was created. &nbsp;See instructions above on where to copy and rename the files.</p>
<p>Let us now create our main toolbar Search button. Create a new node, naming it "Search", and place it under Application. <br /> <img src="images/demo/model5.jpg" alt="" width="598" height="262" border="0" /></p>
<p><br /> Add a Search node and make it a child under Search. <br /> Now, use the add button to add all the following: <br /> <img src="images/demo/model6.jpg" alt="" width="692" height="612" border="0" /></p>
<p><br /> It will look like the following: <br /> <img src="images/demo/model7.jpg" alt="" width="500" height="299" border="0" /><br /> We might not want to leave Company as "List All", but it is good for now.</p>
<h3>Security</h3>
<p>OABuilder lets you define coarse and fine grain access and security. Let&rsquo;s go back to the Model UI and add a security setting to the "System" button, so that only Admin users can use it. <br /> <img src="images/demo/model8.jpg" alt="" width="518" height="304" border="0" /><br /> We will show this being used when we switch back to multiuser mode later.</p>
<p>Set up another company "ABC Company", with one location type, and then add one location.</p>
<p><br /> <img src="images/demo/demo19.jpg" alt="" border="0" /><br /> If you go to the "Search Employees" tab and do a search, there will not be any results. Select the "Test Company" and redo the search to see "John Doe".</p>
<p>Go ahead and create an employee for "ABC Company" main location with name "Mary Smith".</p>
<p>Let us make a few changes to Employees before moving on. Add new properties for hireDate, inactiveDate, inactiveReason.<br /> <img src="images/demo/prop9.jpg" alt="" width="508" height="401" border="0" /><br /> <br /> Make inactiveReason visible only when there is an inactiveDate.<br /> <img src="images/demo/prop10.jpg" alt="" width="474" height="243" border="0" /></p>
<p>Make the Employee recursive by recreating a self-reference/link, so we can know the management structure. Use the link button to do this, then go to "General II" tab and set "Is Employees recursive?" to yes.<br /> <img src="images/demo/link21.jpg" alt="" width="518" height="241" border="0" /><br /> We also need to make sure that Employees belong to the same Company.<br /> <img src="images/demo/link22.jpg" alt="" width="698" height="221" border="0" /><br /> Also, make the Link Location.Employees recursive.</p>
<p>Do a codegen and rerun the App, and make sure we can get "John Doe" some help from a new Employee. <br /> <img src="images/demo/demo20.jpg" alt="" width="716" height="463" border="0" /></p>
<p>Ok, the Location.employees recursive is not going to work for us. Instead, we need to have Company.employees as a recursive/hierarchy, and Locations.employees as the Employees that work from that Location. <br /> So, we will undo a couple of things and move forward from there. The nice thing is therefore modeling is so helpful, making it easy to try things and make changes.</p>
<p>Go back to the Location.employees link and set "Is Employees recursive" to no.<br /> Go back to the Employee.employees link and change the name from "parentEmployee" to "managerEmployee".<br /> Create a One2Many link for Company.Employees. Set "Does Company owns Employees" to true. "Is Employees recursive" should be yes.<br /> Also, go back to "General I" tab and set the "Cache Size:" for Employees to 100. This sets the amount of Company.employees that will use cache, before allowing them to be re-selected from Datasource.<br /> <br /> Delete the Link for Company.searchEmployee - and we will next recreate it using "Company.Employees" as the property path. Right click Company, "Create new Search Link ..." and select "Company.employees".</p>
<p>Make the following change to Link Location.employees, "General III" tab, set "Select Location from" to "company.locations". <img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: we just did some <em>rewiring</em>, so that we have "a Company owns a hierarchy of Employees" that "belong to a Location".</p>
<p>I moved the Objects around a bit, go ahead and use the next CheckPoint #4.<br /> <img src="images/demo/model9.jpg" alt="" width="728" height="288" border="0" /></p>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #4 was created<br /> Use the instructions above to use the checkpoint files.<br /> <img src="images/demo/checkpoint4.jpg" alt="" width="247" height="602" border="0" /></p>
<p>Here is what Company is looking like now.<br /> <img src="images/demo/demo21.jpg" alt="" width="921" height="495" border="0" /></p>
<p>Couple of notes: the demo application is being generated straight from the model. The code generators have all the information to do this, including the custom code that we added.<br /> The recursive "Company.employees have employees" has multiple ways for viewing.<br /> <img src="images/demo/demo22.jpg" alt="" width="534" height="346" border="0" /></p>
<p>Before moving on, let us look at the model.<br /> <img src="images/demo/model10.jpg" alt="" width="653" height="455" border="0" /><br /> This shows how the Locations and Employees are set up so that they are under the same Company.</p>
<p>Let us create some Object Filters. We want a list of Employees that do not have a HireDate assigned. Click on the Employee Object, select the "Filter" tab, click "New" button, and make the following Filter.<br /> <img src="images/demo/filter1.jpg" alt="" width="500" height="268" border="0" /><br /> Go to the "Dependent Properties" and add "HireDate". <br /> Go to the Code tab, and add the following for the Query. This is how it will initially load from datasource.<br /> <img src="images/demo/filter2.jpg" alt="" width="472" height="281" border="0" /><br /> Now add the Java code.<br /> <img src="images/demo/filter3.jpg" alt="" width="527" height="288" border="0" /><br /> ... also fix a typo, change "HireDate == null" to "hireDate == null".</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun:<br /> Now give "John Doe" a hireDate. Change the Table to "flattened", and choose "No Hire" from filter dropdown.<br /> <img src="images/demo/demo23.jpg" alt="" width="648" height="410" border="0" /><br /> That's a simple Filter, but it gives you the idea of how it works. A filter be created on anything, and it will be dynamically updated.</p>
<p>Next let us look at how to create a "Test Client", which is a client application that can connect and interact with the Server.</p>
<p>We want to run the Server and have another program connect to it and select Employee John Doe. <br /> From Eclipse, go to "run configurations" and find and make a duplicate of your "EmpowHR client", and make the following changes.<br /> <img src="images/demo/eclipse1.jpg" alt="" width="660" height="382" border="0" /><br /> If you run it now, it will try to connect to a server and fail. Let us run the server, but first copy ObjectCache.bin &amp; data.bin from runtime/client/data to runtime/server/data. Then run as Server, then run your testclient.</p>
<p>The testclient connected to the Server and then exited. Now, pull up file TestClientController.java, and make the following change:<br /> <img src="images/demo/demo24.jpg" alt="" width="826" height="656" border="0" /><br /> Rerun and you will see console output showing John Doe Employee object, and then it will disconnect after 2 seconds.</p>
<p>Let us now create a "New Hire Certificate" for John Doe. We want to be able to have a template created for the Company or Location and allow it to be used for an Employee. <br /> Click on the Company Object and create a new property.<br /> <img src="images/demo/prop11.jpg" alt="" width="595" height="560" border="0" /><br /> Click on the flags tab, and check "Html Template".<br /> <img src="images/demo/prop12.jpg" alt="" width="835" height="384" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun as Single User.</p>
<p><img src="images/demo/demo24.jpg" alt="" width="826" height="656" border="0" /><br /> We will go over all the things that you can do with the editor in another tutorial. For now, it is worth noting that you can have a background image, which would make the certificate look great. Other data tags can be used to dynamically create as a report or pdf.</p>
<p>What we want to do next is to allow a Location to have their own employee certificate, instead of the one that is in the Company.<br /> Create the same project "certificate" in Location as you did for Company. Use copy and paste to save time. From the left side, right click on the Company.certificate property and choose copy. Then right click on Location and choose paste.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun as Single User, and see how the Location now has a Certificate tab.</p>
<p>Now we want to be able "know" what certificate to use for an Employee. Both the Company and Location has certificate property, we want to have the Employee.location checked first, and if empty then keep checking the parent Locations since it recursive, before using the Company.certificate. <br /> To handle this, we will create a calculated property in Employee for "certificate" and use a finder to get the value. Click on the Employee Object and create a new Calculated Property named "certificate".<br /> Go to the "Dependent Property" tab and add property paths: "location.certificate", and "company.certificate". <br /> For the "Code" tab, enter the following:<br /> <img src="images/demo/calc5.jpg" alt="" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun as Single User, and see how the Employee Certificate tab matches the first value found in Location or Company.</p>
<p>Note: setting a Location hierarch would also follow the Location hierarchy itself.</p>
<p>Next let us add an Image Object to the Model. We will use it as a <em>general purpose</em> place to store images. Initially, we use it for Employee phone and signatures. <br /> Create a new Model Object and name it "Image". Click the checkbox for "multi-purpose".<br /> <img src="images/demo/object5.jpg" alt="" width="763" height="458" border="0" /><br /> Create the following property to store the image.<br /> <img src="images/demo/prop13.jpg" alt="" width="596" height="237" border="0" /><br /> Go to the "Flags" tab and check "Image".</p>
<p>Now create a link between Employee and Image, set type to OneToOne.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun.</p>
<p><img src="images/demo/demo26.jpg" alt="" width="661" height="427" border="0" /><br /> Image editor.</p>
<p>The name of our last Object "Image" caused some problems, since there are other classes with the same name. We can fix that by changing the Object to "AppImage", and everything else will adjust (rename). <br /> We will also need to delete the files that were generated for the "Image" Object, since OABuilder does not delete any files. <br /> From Eclipse, you can do a "Search / File ...", and select Image*.* to get a list.<br /> <img src="images/demo/eclipse2.jpg" alt="" width="440" height="215" border="0" /><br /> Then use the following to delete all of them.<br /> <img src="images/demo/eclipse3.jpg" alt="" width="630" height="483" border="0" /></p>
<p>Go ahead and use the next <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #5. Get the model and the data files.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun.</p>
<h5>Generate DB script</h5>
<p>Let us take another sidetrack and look at generating a database script from the Model. The Model is database independent, which means that we can switch databases easily. So far, we have been using the OADataSourceObjectCache, which loads data into cache and allows queries and crud operations. It is great for starting out, entering test data, and for Applications without a ton of data. The next level would be to use JavaDB, which your application is set up to work with zero admin. Backups, compression, and other housekeeping are built-in, and with OA it is able to even act as a distributed database - more precisely, "a distributed Object Graph" that works over top of a datasource. At any time, we can choose to switch to another JDBC database or other DataSource.</p>
<p>Let us add JavaDB for now and get an idea how the model generates the database's scheme.</p>
<p>Go to the Model Editor, and click on the "DataSource" tab. Set up to match:<br /> <img src="images/demo/model11.jpg" alt="" width="616" height="222" border="0" /></p>
<p>Now that it knows what type of DB, the Database DDL script can be generated.</p>
<p>Select "Generators" from the menu, and click on "SQL Script ...", and it will ask for file name to write it to. This script can then be used to create the database scheme.</p>
<p>That is the introduction, we will get more into the database/datasource later and show some apps using various databases. Outside of config settings and startup, there is not any Application code directly interacting with the database. The Objects have built in support to work with whatever datasources are being used, so it is pretty much automated.</p>
<p>One last thing on Database Scripts (DDL, SQL). The Model Editor's "Changes" tab keeps track of changes, so that an update script can be generated. These changes can be cleared once you have generated the script so that the database is then up to date with the model.</p>
<p>Let us continue with the Model. For the App requirements: "A Company can Awards to its Employees". We already have AwardType and EmployeeAward to the Model, so now we can link them up.<br /> Create a link between Company and AwardType, to have a one2many Link (the default). Set this link so that "Company owns AwardTypes".<br /> <img src="images/demo/model13.jpg" alt="" width="501" height="316" border="0" /></p>
<p>Create a new "name" property for AwardType: click the new button, and then use the copy autocomplete to make a copy of the Campaign.name property.<br /> <img src="images/demo/prop14.jpg" alt="" width="590" height="225" border="0" /><br /> Use the Object Editor to setup the UI for AwardType, setting the table columns and the search properties.</p>
<p>Now, let us create a property for the type of AwardType. Add a new property named "type", as an "int". Go to the "Name/Values" tab and add the following: "Unknown", "Service", "Achievement", "Other".<br /> Go ahead and add this property to your UI table columns and search.<br /> <img src="images/demo/prop15.jpg" alt="" width="474" height="193" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun.</p>
<p><img src="images/demo/demo27.jpg" alt="" width="824" height="463" border="0" /></p>
<p>Now, we want to be able to assign an Employee an AwardType. Create a link between Employee and EmployeeAward (1toMany) ... "Employee can have many Awards".<br /> Set "Does Employee <strong>own</strong> EmployeeAwards" to yes ("General II" tab). Fyi, setting the link to "owned" automatically makes other adjustments to the link.<br /> One last thing, we want the User to select a Company.AwardType to be able to create the EmployeeAward. Go to "General III" tab, and "Pick from link for creating EmployeeAwards", and set to AwardType.<br /> <img src="images/demo/link26.jpg" alt="" width="736" height="235" border="0" /></p>
<p>Create a link between AwardType and EmployeeAward (1toMany) ... "an Employee Award has an AwardType from the Company". Also, we dont need AwardType to have a method for getting EmployeeAwards, so go ahead and set it to "no" - go to "General II" tab, and set "Create method AwardType.getEmployeeAwards" to no. Also, set "Is AwardType required" to yes. <br /> <img src="images/demo/link23.jpg" alt="" width="709" height="549" border="0" /></p>
<p>Now, we want the EmployeeAward to be created by picking an AwardType from the Employee's Company list of AwardTypes ... "employee.company.awardTypes", and we want them to only have one of each. To model this, select the EmployeeAward.AwardType link, and set the "Select AwardType from" to match:<br /> <img src="images/demo/link24.jpg" alt="" width="897" height="552" border="0" /><br /> <br /> Also, an Employee is only allowed to have one of each AwardType (no duplicates). Do this, by making this change:<br /> <img src="images/demo/link25.jpg" alt="" width="712" height="553" border="0" /><br /> This will make the Employee.EmployeeAwards.AwardType unique.</p>
<p>As you can see, the relationships between the objects are also used within other links. These patterns are used throughout modeling, and OABuilder makes it easy to incorporate them to define business rules and logic.<br /> <img src="images/demo/link27.jpg" alt="" width="494" height="278" border="0" /></p>
<p>Set up EmployeeAward UI for table columns and search.</p>
<p>I also made changes to the Model UI. I changed the first Company to "List All", and the second to a "Company Search".<br /> <img src="images/demo/model14.jpg" alt="" width="621" height="279" border="0" /></p>
<p>Check out the Model "Changes" tab, to see all the changes that we made since we cleared them earlier. If we had an existing DB (JavaDB in this example), then we would need to update it with these changes. The code generator menu has a menu item for "SQL Changes Script ..." that would do it.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun.</p>
<p><img src="images/demo/demo28.jpg" alt="" width="686" height="475" border="0" /><br /> All that work just for this one screen shot :)<br /> This shows adding a new AwardType to an Employee, by selecting from Employee.Company.AwardTypes<br /> If you try to add the same one more than once, it does not allow it.</p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: We did some fancy links that all work together to automatically define and enforce requirements.</p>
<p>I created a <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #6 here.</p>
<p>Ok, I need to come up with a new requirement that will need us to create a "Link Merger". A Link Merger is used to create a collection from a property path.<br /> For this example, we want to have a "list of open Awards from Employees who are inactive".</p>
<p>To do this, we will create a filter on Employee, add processed date on EmployeeAward to know that it is no longer "open", and create a filter on EmployeeAward for open .</p>
<p>Click on EmployeeAward and add property "processed" with type "date".</p>
<p>Click on Employee, go to the Object Editor "Filter" tab, and create a new filter and name it "inactive".<br /> For "dependent properties", we only need "inactiveDate", and for code:<br /> <img src="images/demo/filter4.jpg" alt="" width="444" height="247" border="0" /><br /> <img src="images/demo/filter5.jpg" alt="" width="440" height="245" border="0" /></p>
<p>Click on EmployeeAward, go to the Object Editor "Filter" tab, and create a new filter and name it "open".<br /> For "dependent properties", we only need "processed", and for code:<br /> <img src="images/demo/filter6.jpg" alt="" width="429" height="245" border="0" /><br /> <img src="images/demo/filter7.jpg" alt="" width="435" height="247" border="0" /></p>
<p>Now, right click on Company and select "Create new Merger Link ...", which will bring up property path chooser. Choose:<br /> <img src="images/demo/link28.jpg" alt="" width="212" height="268" border="0" /><br /> "employees:inactive.employeeAwards:open" which means "for a Company, get the EmployeeAwards that are not processed for Employees with an inactiveDate" <br /> It named the link "mergeEmployeeAwards", go ahead and change it to "mergeOpenEmployeeAwards". And change display to "Open Emp Awards".</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />Regen and rerun, and let us see how this worked out.</p>
<p>Go to the "Test Corp" Company and click on the "Open Emp Awards" tab. The list is empty. Now go to Employee "John Doe" (<em>remember him?</em>), and give him an inactive date, and a reason if you want.<br /> Now go back to "Open Emp Awards" tab.<br /> <img src="images/demo/demo29.jpg" alt="" width="790" height="481" border="0" /></p>
<p>So ... that is a Merger Link that uses a Property Path from Object to another Object, and allowing Filters. The other thing to notice is that it is real-time: a change that affects the property path will automatically keep the list updated - not by refreshing, but by adjusting with delta changes.</p>
<p>Let us look at the generated code. Pull up Company.java and go to method "getMergeOpenEmployeeAwards()".<br /> <img src="images/demo/code7.jpg" alt="" width="924" height="619" border="0" /><br /> The method is a small amount of code, that returns a list (collection) of EmployeeAwards. The annotation tells it the Property Path for the Merger. That is all that is needed to make this work.</p>
<p>Internally, it uses a HubMerger, which will use the Property Path to configure a tree structure that "knows" how to keep the list updated, by listening for specific changes that affect the list. The things that it "listens" for are found by parsing the property path, and getting any additional "dependent property paths" - remember, how we use these in the model? (ex: for calculated properties, filters, etc). <br /> The HubMerger's tree structure is then able to be notified, which allows it to know how to update the list.<br /> The combination of Property Paths (PP), dependent PPs, and being able to <em>listen</em> is core to how reactive models work, and is related to Software Patterns like Model/View/Control (MVC).<br /> Historically, the problem has been scaling. The cost of <em>listening</em> is too high at a certain point. OA has been able to scale this by using a combination of listening with some other unique techniques. The cost is reduced to a small size and stays small with large amounts of data (objects). <br /> Another solution is "<em>reactive streams</em>", but there are boundaries and challenges when using them as the solution.</p>
<p>The solution ends up being a combination of observability through listeners, bubble up events, event streams, tree structures like what Merger uses.</p>
<p>Add remoting to the mix, and you have distributed synchronized object graphs. Sounds complicated, but the code is small and is built on a few core building blocks: Observable Object, Observable Collection, Collection that can be shared, Reflection, annotations, Object Serialization (all types, tech independent), Remoting, Communication (all types, tech independent), Persistence (all types, tech independent). I am sure that I am missing some items, but that is a good chunk of it.</p>
<p><img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: We just got a new requirement: all employees need to pass a series of company tests, and each one could have an AwardType. We can use this as an example to show another way to automate how Links work.</p>
<p>Create a new Object "AppTest" and add Name (String, max: 50, display: 15), and add all of the properties for the UI display, search &amp; table columns.<br /> Create another property "document", pick type "String Long", and check as Html in the "Flags" tab.<br /> Now, create a new Link "Company has many AppTests", and make it owned.<br /> Now, set up a new Link "AwardType has many AppTests", and set "create method AppTest.getAwardType" to no.<br /> Now, set this new Link (General III tab) "Select AwardType from" to: "company.awardTypes".<br /> <img src="images/demo/object6.jpg" alt="" width="512" height="269" border="0" /></p>
<p>Now we need to add a flag to AppTest to know if all Employees must take it.<br /> Add property "required" and set to "boolean". Use the "Flags" tab to check "dont track Primitive null". <br /> <img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: all Employees need to take Company.Tests that are required.<br /> Create a new Filter "Required", dependent property "required", and this for the code:<br /> <img src="images/demo/filter8.jpg" alt="" width="406" height="241" border="0" /><br /> <img src="images/demo/filter9.jpg" alt="" width="279" height="211" border="0" /><br /> Now, we need to add support for an Employee.appTests that are automatically created if "Employee.company.apptests:required".<br /> To describe it another way: "An Employee needs to take each required Company Test".<br /> Create a new Object "EmployeeAppTest", create Link "Employee owns many EmployeeAppTests".<br /> Now, create new Link "EmployeeAppTest has an AppTest, and is required". Set (General II tab) "Create method AppTest.getEmployeeAppTests" to no.<br /> Go back and click on "Employee.employeAppTest" Link and "General III" tab, and "Pick from link for creating EmployeeAppTests" to "appTest".<br /> <img src="images/demo/link29.jpg" alt="" width="1034" height="787" border="0" /><br /> Go to "General II" tab, and set "Unique property for EmployeeAppTests" to "appTest".</p>
<p>Ok, that was interesting. We need to do one more thing ... have all Company required Tests be assigned to Employees - let us see how that can be done - use the automatch, which means to automatically create EmployeeAppTests for all Company.appTests that are required.<br /> <img src="images/demo/link30.jpg" alt="" width="787" height="520" border="0" /></p>
<p>Click on EmployeeAppTest Object and update the UI tables columns - to use Employee &amp; AppTest<br /> <img src="images/demo/object7.jpg" alt="" width="700" height="565" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run and then we will recap before adding more.</p>
<p>Create a new Company AppTest.<br /> <img src="images/demo/demo30.jpg" alt="" width="843" height="497" border="0" /><br /> Now go to Employees tab, and all Employees for this Company will have the AppTest added. <img src="images/demo/demo31.jpg" alt="" width="840" height="497" border="0" /></p>
<p>There is still something we need to add - we dont want an inactive Employee getting the Company required AppTest. <br /> We will do this next, but first let us look at the code for Employee.employeeAppTests.<br /> <img src="images/demo/code8.jpg" alt="" width="568" height="220" border="0" /><br /> The match info is stored in the Annotation, which is <em>metadata</em> about the Employee used to manage the Employee.EmployeeAppTests. The getHub uses this to be able to get the EmployeeAppTests and keep them updated with the Company.AppTests that are required ... matchHub use property path "Company.appTests:required". <br /> Let us make sure that inactive Employees dont get new AppTests. Click on the link Employee.employeeAppTests, then go to "Permissions" tab, and set the following:<br /> <img src="images/demo/link31.jpg" alt="" width="754" height="533" border="0" /></p>
<p>Next, we need to make sure that an EmployeeAppTest that is completed is not removed. First, create a property for EmployeeAppTest.completed and make it a Date.<br /> We'll create a Callback for removing: click on the Link Employee.employeeAppTests,<br /> click on "From Code", and then bottom tab "Employee.employeeAppTestsCallback()".<br /> Then set the code to match:<br /> <img src="images/demo/link32.jpg" alt="" width="674" height="277" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run, to see how adding a Company.AppTest is added to Employees when it is required, and removed if it is not required ... unless the Employee completed it.</p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: "A Company can set up Employee Tests that offer an AwardType". "If the Test is required, then all active Employees will get it".<br /> We showed how to set up the Links, and how values in Company.AppTest automatically created matches in Employee.employeeAppTests for active Employees. This also used a Callback to fine tune the rules.</p>
<p>Let us make the whole Employee Object disabled if the inactive is set - except for unsetting the inactive.<br /> Go to Object Editor, "Permissions" tab, and set the Enabled Property to "inactive = false".</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run, go to Company "Test Corp", "Employees" tab and give "John Doe" and inactiveDate.<br /> <img src="images/demo/link32.jpg" alt="" width="674" height="277" border="0" /><br /> You will notice that the UI for this Employee is disabled, including the inactive date. This keeps it from being re-activated by removing the inactive date.<br /> To fix this, go to Model property Employee.inactive and create a Callback to allow it to be enabled.<br /> <img src="images/demo/prop16.jpg" alt="" width="1080" height="878" border="0" /><br /> <img src="images/demo/demo33.jpg" alt="" width="711" height="421" border="0" /><br /> Now, let us set it up so that an Employee will get an AwardType once the EmployeeAppTest is completed.<br /> Here's an option:<br /> Have the code in EmployeeAppTest.setCompleted add to Employee.EmployeeAwards. Here is what it looks like.<br /> <img src="images/demo/code9.jpg" alt="" width="689" height="572" border="0" /></p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />The method isLoaded is built in and is used to know if an object is being initialized/loaded.<br /> The method start &amp; endServerOnly is so that the code will run on the main server. OA supports distributed models, and this is one of a few methods used for objects to interact with how code is ran.</p>
<p>That solution is embedded into the EmployeeAppTest.completed method. Other options that could also be used: 1: create a process that would do it and listen for completed, 2: create a Trigger that would do it.<br /> <img src="images/demo/trigger1.jpg" alt="" width="694" height="574" border="0" /><br /> <img src="images/demo/trigger2.jpg" alt="" width="409" height="240" border="0" /><br /> <img src="images/demo/trigger3.jpg" alt="" width="567" height="531" border="0" /><br /> <br /> All three are valid solutions. The last two ideas are "outside" of the Object code, and might be preferred if you want to keep custom code outside of the Objects.</p>
<p>I think we are done with that :)</p>
<p>I created a <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #6 here.</p>
<p>Let's set up Campaigns.<br /> <img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: "Companies have their own Campaigns, that their Employees are assigned to by one of the following: all active Employees, assigned by Managers, enrolled by Employee, or nominated by X number of other Employees."</p>
<p>The first thing we will do is create an "assignment type", for the type of method used for adding Employees to a Campaign.<br /> Click on Campaign and add the following new property "assignmentType", as type = "int",<br /> under "Flags" tab, check "dont track primitive null",<br /> and then match this for the "Name/Values" tab.<br /> <img src="images/demo/prop17.jpg" alt="" width="468" height="446" border="0" /></p>
<p>Add another property "nominateCount", for the number of nominations needed if type is Nominated.<br /> Since this property is only needed for "type=nominated", then we only want it to be visible in that case.<br /> Create a Calculated Property, "usesNominateCount", type=boolean, "Dependent Properties" needs to have "assignmentType", and "Code" should match this:<br /> <img src="images/demo/prop17.jpg" alt="" width="468" height="446" border="0" /></p>
<p>Now, go back to "nominateCount" property, "Permissions" tab, and set "Visible Property" to "usesNominateCount".</p>
<p>Go to the UI, table columns and match:<br /> <img src="images/demo/object8.jpg" alt="" width="663" height="450" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run and test Company Campaigns.</p>
<p><img src="images/demo/demo34.jpg" alt="" width="775" height="516" border="0" /></p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: we now have a way for Companies to have Campaigns, which will allow Employees to be added based on the Campaign.type. <br /> Employees will be able to earn awards/points based on their Campaign involvement, which will then allow them to go "shopping". <br /> Next, we will be set up how Employees are assigned Campaigns. <br /> <img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />Discuss &amp; Learn: First, let us take a break and discuss security and how it helps to build the Model, and how it works in the application.</p>
<p>OABuilder lets you define a User object for the Model. This is the User that logs into the Application. This User could also be considered a "Context", which could be a person, another computer system, process, etc. Anyway, it is treated as a User, and the application has methods to get and set the User, that is accessible by the Model and all the Application. Basically, getting the <em>UserConext</em> returns who the current User is. In the Model, we can use this User to define permissions for levels of access to the Model itself.</p>
<p>In this demo, we have been logging in as a User, and are able to navigate to most of the application data ... Companies, Campaigns, Employees, etc.<br /> The way we have it, the User is more like an Administrator for the system, an internal operations, customer support, etc., and the rules are based on what these types of users are able to do.</p>
<p>We also want our customers (Companies) to allow their Employees to login, and for them to stay within their area, which would be under the Company that they work for, under their manager, and the rules set up based on that. So, we have two "user" sides to the Application. The first is the "our" company running the software, and the other is our customers Employees.</p>
<p>So far, we have been building the demo and using the internal User, and have been using a desktop application for the user interface.</p>
<p>We want to have other types of interfaces.</p>
<ul type="disc">
<li>our customers, Company Employees, to have access through a website or mobile App.</li>
<li>API using REST and webservices, so that we can allow our Customers and Partners.</li>
<li>Other user within our company used to manager operations of business tasks. For example, shipping, receiving, communications, etc.</li>
</ul>
<p>To accomplish this, we have the Employee Object to allow our customers to have access, and will later be setting it up to drive a UI for this.</p>
<p><img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: allow Company Employees to login to a web or mobile App that allows them to manager their account and have limited access to the employees that they manage. Also, we will want some Employees to have access to their Company or Location as an administrator.</p>
<p><img src="images/demo/continue.jpg" alt="" width="25" height="26" border="0" />Continue working on the Model: Let us add Employees to a Campaign, and later we will use the Campaign. AssignmentType and User (Context) to determine the rules for how this works.</p>
<p><img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: "Company can have all or a subset of their Employees assigned to Campaigns".</p>
<p>Create a one2many link Campaign and Employee, and name its campaign.employees.<br /> <img src="images/demo/link33.jpg" alt="" width="509" height="554" border="0" /></p>
<p>We need to only allow Employees that are under the same Company as Campaign. <img src="images/demo/link34.jpg" alt="" width="1248" height="676" border="0" /></p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />Discuss &amp; Learn: the Link that we just created is "Campaign employees" &amp; the reverse "employees.campaign" was set up to be a One2Many. An Employee can be added to the Campaign list of Employees by directly adding to the Campaign.employees or <em>indirectly</em> by setting the Employee.campaign to a Campaign.</p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run and test Company.Campaigns has Employees ... and then we will talk about what is wrong and how to fix it.</p>
<p><img src="images/demo/demo35.jpg" alt="" width="691" height="542" border="0" /></p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: we just created a link for Company.campaigns have Company.Employees. There's a couple of problems.<br /> 1: the "select Employees from" will use a dropdown to show all the Company Employees to select from. This could be a huge list. We want it to use an Employee search instead. <br /> 2: the link needs to be of type Many2Many, since an Employee can be in one or more campaigns.</p>
<p>Let us go ahead and change. For #1, clear the value in the link's "select Employees from"<br /> <img src="images/demo/link35.jpg" alt="" width="903" height="589" border="0" /></p>
<p>Now change the One2Many link Campaign.Employees to Many2Many link Campaigns.Employees<br /> <img src="images/demo/link36.jpg" alt="" width="508" height="495" border="0" /></p>
<p>Also, make sure that "select from" and "equal property path" matches the following:<br /> <img src="images/demo/link37.jpg" alt="" width="685" height="219" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run to test that Company.Campaigns have Employees ... and Employees have Campaigns. Notice that adding an Employee to Campaign is now using an Employee search, and the Employee &amp; Campaign must match the same Company. Adding an Employee to a Campaign automatically adds the Campaign to the Employee's list of Campaigns - and vice versa. The same with removing.</p>
<p><img src="images/demo/demo36.jpg" alt="" width="955" height="549" border="0" /><br /> Lots of arrows here - select Test Company, click on Campaign tab, select first Campaign, select Employees tab, click add button to add Employees, from popup search click run search, multi select one or more Employees, and click Ok button.</p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />Discuss &amp; Learn: a Many2Many links have a "special" requirement for storing to a database. Both Employee and Campaign have their own tables, and another table is needed to store the relationship between the two. If the relationship is One, then the table uses a column that is a foreign key into the other table's primary key. A <em>link table</em> is used to for M2M relationships and stores the primary keys of both tables.<br /> Look at the "DataSource" tab, which displays the Link table information for creating the Database script. <img src="images/demo/link38.jpg" alt="" width="710" height="522" border="0" /></p>
<p>Check out the Model Changes tab, to see how it captured the change to create the Link table.<br /> <img src="images/demo/link38.jpg" alt="" width="710" height="522" border="0" /></p>
<p><img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #8 was created before starting this next section.</p>
<p><img src="images/demo/continue.jpg" alt="" width="25" height="26" border="0" />Continue working on the Model:<br /> Sometimes, a M2M relationship needs additional information. For our Employee Campaign Link, we want to know if the Employee participated/completed the Campaign.</p>
<p>To do this, we will remove the M2M link we just created, and instead create a "Link Object", which is just a normal Object like the others, and it will look like the following.</p>
<p>Add new Object, and new Property "completed" (Date).<br /> <img src="images/demo/object9.jpg" alt="" width="663" height="548" border="0" /></p>
<p>The Links are a little more complicated, since we are having it "act" like a M2M relationship, and using a middle object with O2M link between it and the other Objects, which forms an <em>extended</em> M2M link.</p>
<p>What we are saying here is that "Employees have many Campaigns and for each we have a completed date". <br /> And the reverse "Campaigns have many Employees and for each we have a completed date". <br /> And: the Employees and Campaigns must be from the same Company. <br /> The Object EmployeeCampaign links "Employee.Campaigns" and the reverse "Campaign.Employees", to form an extended M2M relationship.</p>
<p>We have also set it up so that Campaign.Company and Employee.Company must match: <br /> "Employees can only be assigned to Campaigns from their Company", and<br /> "Campaigns can only add Employees from their Company".<br /> <img src="images/demo/link40.jpg" alt="" width="1369" height="844" border="0" /><br /> Note: this shows Employee and Campaign must come from same Company. And, that the user should pick a Campaign to create a new EmployeeCampaign.</p>
<p><img src="images/demo/link41.jpg" alt="" width="913" height="574" border="0" /><br /> Notes: this also shows Employee and Campaign must come from same Company. And, that the user should pick an Employee to create a new EmployeeCampaign. <br /> "Select Campaigns from" is used so that an Employee can use a dropdown list of their Company's Campaigns to choose from.</p>
<p><img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />Discuss &amp; Learn: A Link Object is used to form an <em>Extended</em> ManyToMany relationship between two Objects and requires each relationship object. In our example, "Employees have many Campaigns" is a M2M by using the EmployeeCampaign Object.</p>
<p>Couple more things before we run: <br /> set up the UI for the EmployeeCampaign to include the Employee &amp; the Campaign in the table columns.<br /> <img src="images/demo/object10.jpg" alt="" width="791" height="566" border="0" /></p>
<p>create a EmployeeCampaign calculated property "display", that uses (dependent properties) Employee.fullName and Campaign.name, and then use it as the UI display.<br /> <img src="images/demo/calcProp6.jpg" alt="" width="615" height="572" border="0" /><br /> <img src="images/demo/calcProp7.jpg" alt="" width="622" height="261" border="0" /><br /> <img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run:</p>
<p>Test to see how an Employee can be added to a Campaign and how a Campaign can be added to an Employee.</p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review:<br /> We have just used an Extended Link to form a M2M relationship with an Object in the middle.</p>
<p><img src="images/demo/continue.jpg" alt="" width="25" height="26" border="0" /><br /> Next, we will set up the AwardType that an Employee will receive when they complete a Campaign.</p>
<p>Create a new link "a Company Campaign can have a Company AwardType assigned to it", Campaign.AwardType so that it has the following: <br /> draw a link from AwardType to Campaign ... so that it creates a O2M link.<br /> <img src="images/demo/link42.jpg" alt="" width="412" height="542" border="0" /></p>
<p>Go to the "General" tab, and set the "Create method AwardType.getCampaigns" to "no".<br /> <img src="images/demo/link43.jpg" alt="" width="608" height="565" border="0" /><br /> This is "saying" that we dont need a getCampaigns from AwardType. If left to "yes" (which is ok), then the user would be able to see the Campaigns that and assign Campaigns to an AwardType. By setting to "no" were saying that we want to assign an AwardType from the Campaign.</p>
<p>Now, go to the "General III" tab and set the property path for picking an AwardType.<br /> This is saying "a Company Campaign can be assigned a Company AwardType".<br /> <img src="images/demo/link44.jpg" alt="" width="832" height="573" border="0" /></p>
<p>Before we rerun, let us go to AwardType and add a new "type", "Campaign":<br /> <img src="images/demo/prop19.jpg" alt="" width="837" height="573" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run:<br /> Go to a Company Award Types, and create a new one.<br /> <img src="images/demo/demo37.jpg" alt="" width="661" height="361" border="0" /></p>
<p>Go to Company Campaigns tab, select the Campaign, and assign an AwardType to it.<br /> <img src="images/demo/demo38.jpg" alt="" width="873" height="535" border="0" /></p>
<p>One more thing, for completeness:<br /> we want to add a new filter, so only AwardTypes with type=Campaign can be selected.</p>
<p>Select AwardType Object, and select the "Filters" tab. <br /> Create new filter "campaignType".<br /> For "Dependent Properties" choose "type".<br /> Select "code" tab, then "query" subtab, click "generate code", and update code to match:<br /> <img src="images/demo/filter10.jpg" alt="" width="557" height="258" border="0" /></p>
<p>Select "code" tab, then "Filter" subtab, click "generate code", and update code to match:<br /> <img src="images/demo/filter11.jpg" alt="" width="455" height="243" border="0" /></p>
<p>Now, let us use that new Filter. Click on the Campaign.AwardType link, and make the following change:<br /> <img src="images/demo/link45.jpg" alt="" width="785" height="577" border="0" /></p>
<p><img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run:<br /> Set a the AwardType for a Campaign, and notice the new Filter working.<br /> <img src="images/demo/demo39.jpg" alt="" width="873" height="535" border="0" /></p>
<p><img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review:<br /> We have a new link Object "EmployeeCampaign", that is connected with Employee and Campaign, that is forming a M2M relationship between Employees and Campaigns. This "relationship pattern" is an <em>extended</em> M2M.</p>
<p>I created <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint #9 here.</p>
<p>qqqqqqqqqqqqqqqqqq<br /> qqqqqqqqqqqqqqqqqq<br /> qqqqqq NEXT qqqqqq<br /> qqqqqqqqqqqqqqqqqq</p>
<p>Event start/end date used by calendar.</p>
<p>discuss distributed ... run as server and clients show rest get sib data remoting diagram tunnelling http rest multiplexer socket remoting smart dynamic references, object graph messaging or remoting.</p>
<p>start layered diagram showing whiteboard qqqqqqqqqqq How do emp get awards ... create an CompanyEvent that has employees, that will auto give Emps an AwardType equal to CompanyEvent.awardType. The next Rule is that only a manager can assign an Employee and AwardType. Rule review codebase maven OA dependencies location.employees .... make employees recursive Location employees ... merge save model (break points) permissions for setting up Locations, etc. have user check readme.txt file use calc Location Type for display qqqqqqqqqqqqq VVVVVVVVVVVVVVV <img src="images/demo/whiteboard.jpg" alt="" width="24" height="25" border="0" />Whiteboard: <img src="images/demo/review.jpg" alt="" width="27" height="26" border="0" />Review: <img src="images/demo/rule.jpg" alt="" width="23" height="26" border="0" />BizRule: <img src="images/demo/checkpoint.jpg" alt="" width="22" height="29" border="0" />CheckPoint: <img src="images/demo/genrun.jpg" alt="" width="23" height="24" border="0" />ReGen &amp; Run: <img src="images/demo/discuss.jpg" alt="" width="24" height="24" border="0" />Discuss &amp; Learn: <img src="images/demo/continue.jpg" alt="" width="25" height="26" border="0" />Continue working on the Model: src="images/demo/todo.jpg"&gt; to do item: h3</p>
</div>